{"version":3,"sources":["../../../../src/typography/src/Pre.js","@components/Code.js","../../../../src/icons/generated/EditIcon.js","../../../../src/icons/generated/TrashIcon.js","@views/Config/SchemaEdit.js"],"names":["Pre","memo","forwardRef","props","ref","is","marginTop","marginBottom","Text","Code","state","codeString","console","log","this","minHeight","Component","svgPaths16","svgPaths20","EditIcon","name","TrashIcon","PageConfig__SchemaEdit","ready","busy","saveBusy","validateBusy","isDeleteShown","isShown","changes","formErrors","mounted","saveDocument","bind","getSchemaValue","showJson","validateJson","removeError","updateFormData","a","isNew","match","params","id","ConfigService","getSchema","schemaKey","then","documentation","schema","supportsTemplates","table","isSingular","getValue","SchemaValue","filter","item","key","length","SchemaFormValue","Object","keys","forEach","errors","isDisabled","onChange","value","formData","undefined","default","type","map","version","Values","k","Value","columns","label","setState","e","preventDefault","validateValue","res","toaster","danger","success","setValue","jsonObj","Array","isArray","formString","JSON","stringify","index","splice","data","className","Busy","Form","Pane","padding","backgroundColor","borderBottom","Button","disabled","appearance","onClick","isLoading","iconBefore","FloppyDiskIcon","TickIcon","intent","marginRight","err","Alert","isRemoveable","onRemove","title","Heading","size","Paragraph","color","SideSheet","onCloseComplete","Dialog","hasHeader","isConfirmLoading","onConfirm","deleteValue","history","goBack","confirmLabel","schemaPath"],"mappings":"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","file":"static/js/5.2afd0ec2.chunk.js","sourcesContent":["import React, { memo, forwardRef } from 'react'\nimport Text from './Text'\n\nconst Pre = memo(\n  forwardRef(function Pre(props, ref) {\n    return <Text is=\"pre\" marginTop={0} marginBottom={0} {...props} ref={ref} />\n  })\n)\n\nPre.propTypes = {\n  ...Text.propTypes\n}\n\nexport default Pre\n","import React, { Component } from 'react'\nimport { Pre } from 'evergreen-ui'\n// import MonacoEditor from 'react-monaco-editor';\n\nclass Code extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      codeString: props.codeString || '{}'\n    }\n  }\n  // editorDidMount(editor, monaco) {\n  //   console.log('editorDidMount', editor);\n  //   editor.focus();\n  // }\n  // onChange(newValue, e) {\n  //   console.log('onChange', newValue, e);\n  // }\n  render() {\n    console.log(this.state, this.props)\n    return (\n      <Pre minHeight={'100%'}>\n        <code>{this.state.codeString}</code>\n      </Pre>\n      // <MonacoEditor\n      //   // width=\"800\"\n      //   height=\"600\"\n      //   language=\"json\"\n      //   theme=\"vs-dark\"\n      //   value={code}\n      //   options={options}\n      //   // onChange={this.onChange}\n      //   // editorDidMount={this.editorDidMount}\n      // />\n    )\n  }\n}\n\nexport default Code;\n","import React, { memo, forwardRef } from 'react'\nimport Icon from '../src/Icon'\n\nconst svgPaths16 = [\n  'M3.25 10.26l2.47 2.47 6.69-6.69-2.46-2.48-6.7 6.7zM.99 14.99l3.86-1.39-2.46-2.44-1.4 3.83zm12.25-14c-.48 0-.92.2-1.24.51l-1.44 1.44 2.47 2.47 1.44-1.44c.32-.32.51-.75.51-1.24.01-.95-.77-1.74-1.74-1.74z'\n]\nconst svgPaths20 = [\n  'M4.59 12.59l2.83 2.83 7.65-7.65-2.83-2.83-7.65 7.65zM2 18l4.41-1.59-2.81-2.79L2 18zM16 2c-.55 0-1.05.22-1.41.59l-1.65 1.65 2.83 2.83 1.65-1.65A2.006 2.006 0 0016 2z'\n]\n\nexport const EditIcon = memo(\n  forwardRef(function EditIcon(props, ref) {\n    return (\n      <Icon\n        svgPaths16={svgPaths16}\n        svgPaths20={svgPaths20}\n        ref={ref}\n        name=\"edit\"\n        {...props}\n      />\n    )\n  })\n)\n","import React, { memo, forwardRef } from 'react'\nimport Icon from '../src/Icon'\n\nconst svgPaths16 = [\n  'M14.49 3.99h-13c-.28 0-.5.22-.5.5s.22.5.5.5h.5v10c0 .55.45 1 1 1h10c.55 0 1-.45 1-1v-10h.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5zm-8.5 9c0 .55-.45 1-1 1s-1-.45-1-1v-6c0-.55.45-1 1-1s1 .45 1 1v6zm3 0c0 .55-.45 1-1 1s-1-.45-1-1v-6c0-.55.45-1 1-1s1 .45 1 1v6zm3 0c0 .55-.45 1-1 1s-1-.45-1-1v-6c0-.55.45-1 1-1s1 .45 1 1v6zm2-12h-4c0-.55-.45-1-1-1h-2c-.55 0-1 .45-1 1h-4c-.55 0-1 .45-1 1v1h14v-1c0-.55-.45-1-1-1z'\n]\nconst svgPaths20 = [\n  'M17 1h-5c0-.55-.45-1-1-1H9c-.55 0-1 .45-1 1H3c-.55 0-1 .45-1 1v1h16V2c0-.55-.45-1-1-1zm.5 3h-15c-.28 0-.5.22-.5.5s.22.5.5.5H3v14c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V5h.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5zM7 16c0 .55-.45 1-1 1s-1-.45-1-1V8c0-.55.45-1 1-1s1 .45 1 1v8zm4 0c0 .55-.45 1-1 1s-1-.45-1-1V8c0-.55.45-1 1-1s1 .45 1 1v8zm4 0c0 .55-.45 1-1 1s-1-.45-1-1V8c0-.55.45-1 1-1s1 .45 1 1v8z'\n]\n\nexport const TrashIcon = memo(\n  forwardRef(function TrashIcon(props, ref) {\n    return (\n      <Icon\n        svgPaths16={svgPaths16}\n        svgPaths20={svgPaths20}\n        ref={ref}\n        name=\"trash\"\n        {...props}\n      />\n    )\n  })\n)\n","import React, { Component } from 'react'\n// import { withRouter } from 'react-router-dom'\nimport Form from '../../@components/Form';\nimport ConfigService from '../../@services/Config';\nimport Code from '../../@components/Code';\nimport Busy from '../../@components/Busy';\n\nimport { SideSheet, Pane, Dialog, EditIcon, TickIcon, Alert, TrashIcon, Heading, Paragraph, Button, FloppyDiskIcon, toaster } from 'evergreen-ui'\n\nclass PageConfig__SchemaEdit extends Component {\n\n  constructor(props)\n  {\n    super(props)\n    this.state = {\n      ready: false,\n      busy: true,\n      saveBusy: false,\n      validateBusy: false,\n      isDeleteShown: false,\n      isShown: false,\n      changes: false,\n      formErrors: []\n    }\n    this.mounted = false\n    this.saveDocument = this.saveDocument.bind(this)\n    this.getSchemaValue = this.getSchemaValue.bind(this)\n    this.showJson = this.showJson.bind(this)\n    this.validateJson = this.validateJson.bind(this)\n    this.removeError = this.removeError.bind(this)\n    this.updateFormData = this.updateFormData.bind(this)\n  }\n  \n  async componentDidMount()\n  {\n\n    this.mounted = true\n    \n    this.getSchemaValue()\n\n  }\n\n  getSchemaValue()\n  {\n\n    var isNew = this.props.match?.params.id === \"new\"\n\n    ConfigService.getSchema(this.props.schemaKey)\n      .then(({ documentation, schema, supportsTemplates, table }) => {\n\n        if (!this.mounted) return;\n\n        (this.props?.isSingular ?\n          ConfigService.getValue(this.props.schemaKey) :\n          ConfigService.getValue(this.props.schemaKey)\n            .then(SchemaValue => this.props?.isSingular ? {} : SchemaValue.filter(item => item.key === this.props.match.params?.id))\n            .then(SchemaValue => this.props?.isSingular ? {} : (SchemaValue.length ? SchemaValue[0] : false))\n        )\n          .then(SchemaValue => isNew ? {} : SchemaValue)\n          .then(SchemaValue => {\n\n            if (!this.mounted) return;\n            \n            if (!SchemaValue && !isNew) return;\n\n            var SchemaFormValue = {}\n\n            Object.keys(schema).forEach(key => {\n\n              SchemaFormValue[key] = {\n                ...schema[key],\n                key: key,\n                errors: [],\n                isDisabled: (key === \"key\" ? !isNew : false),\n                onChange: (key, value) => {\n                  this.updateFormData({...this.state.formData, [key]: { ...this.state.formData[key], value: value }})\n                },\n                value: (() => {\n                  \n                  if (!(key in SchemaValue) || SchemaValue[key] === undefined) return schema[key].default || undefined;\n\n                  switch (schema[key]?.type)\n                  {\n                    case 'string[]':\n                      return SchemaValue[key].map(item => { return typeof item === \"string\" ? (item) : (`${item.id}@${item.version}`) });\n                    case 'keys':\n                      return (() => {\n                        var Values = {}\n                        Object.keys(schema[key].keys).forEach(k => {\n                          var Value = (k in SchemaValue[key]) ? SchemaValue[key][k] : (schema[key][k]?.default);\n                          if (undefined !== Value) Values[k] = Value;\n                        })\n                        return Values\n                      })();\n                    default:\n                      return SchemaValue[key];\n                  }\n\n                })()\n              }\n\n              // post value set field mods\n              if (schema[key]?.type === 'repeater')\n              {\n                SchemaFormValue[key].columns = 'columns' in SchemaFormValue[key] ? SchemaFormValue[key].columns : [{label:'Key', key: 'key'}];\n              }\n\n            })\n\n            this.setState({\n              isNew: isNew,\n              supportsTemplates: supportsTemplates,\n              formData: SchemaFormValue,\n              saveBusy: false,\n              busy: false,\n              ready: true\n            })\n\n          })\n        \n      })\n  }\n\n  componentWillUnmount()\n  {\n    this.mounted = false\n  }\n\n  validateJson(e)\n  {\n    e.preventDefault()\n    this.setState({\n      validateBusy: true\n    })\n    ConfigService.validateValue(this.props.schemaKey, this.state.formData)\n      .then(res => {\n\n        if (!this.mounted) return;\n\n        if (res?.errors) {\n        \n          toaster.danger(`${res.errors.length} Error(s)`)\n\n          this.setState({\n            formErrors: res.errors,\n            validateBusy: false\n          })\n\n          return;\n\n        }\n        \n        toaster.success('Valid 👍')\n\n        this.setState({\n          validateBusy: false\n        })\n\n      })\n  }\n\n  saveDocument(e)\n  {\n    e.preventDefault()\n    this.setState({\n      saveBusy: true\n    })\n    ConfigService.setValue(this.props.schemaKey, this.state.formData)\n      .then((res)=>{\n\n        if (!this.mounted) return;\n\n        if (res?.errors) {\n        \n          toaster.danger(`${res.errors.length} Error(s)`)\n\n          this.setState({\n            formErrors: res.errors,\n            saveBusy: false\n          })\n\n          return;\n\n        }\n        \n        toaster.success('Saved')\n\n        this.setState({\n          saveBusy: false\n        })\n\n        this.getSchemaValue()\n\n      })\n  }\n\n  showJson(e)\n  {\n    e.preventDefault();\n    var jsonObj = {}\n    Object.keys(this.state.formData).forEach(key => {\n      if (undefined !== this.state.formData[key].value) {\n        if (Array.isArray(this.state.formData[key].value) && this.state.formData[key].value.length === 0) return;\n        jsonObj[key] = this.state.formData[key].value\n      }\n    })\n    this.setState({\n      formString: JSON.stringify(jsonObj, null, 4),\n      isShown: true\n    })\n  }\n\n  removeError(index)\n  {\n    var formErrors = this.state.formErrors.splice(index, 1)\n    formErrors.splice(index, 1)\n    this.setState({\n      formErrors: formErrors\n    })\n  }\n\n  updateFormData(data)\n  {\n    this.setState({\n      formData: data,\n      changes: true\n    })\n  }\n\n  render() {\n    return (\n      <article>\n        {this.state.ready?(\n          <section className=\"split-content\">\n            <div className=\"split-content__left\">\n              {(!this.state.busy)?(\n                <Form className=\"split-content__form\" data={this.state.formData}></Form>\n              ):<Busy/>}\n            </div>\n            <div className=\"split-content__right\">\n              <Pane padding='.5em' backgroundColor='white' borderBottom=\"muted\">\n                <Button disabled={!this.state.changes} appearance=\"minimal\" onClick={this.saveDocument} isLoading={this.state.saveBusy} iconBefore={this.state.saveBusy?(null):(FloppyDiskIcon)}>{this.state.isNew?'Save':'Update'}</Button>\n                <Button appearance=\"minimal\" onClick={this.validateJson} isLoading={this.state.validateBusy} iconBefore={this.state.validateBusy?(null):(TickIcon)}>Validate</Button>\n                <Button appearance=\"minimal\" iconBefore={EditIcon} onClick={this.showJson}>View Json</Button>\n                {!this.state.isNew?(<Button appearance=\"minimal\" intent=\"danger\" marginRight={'.5em'} iconBefore={TrashIcon} onClick={(e) => { e.preventDefault(); this.setState({ isDeleteShown: true })}}>Delete</Button>):(null)}\n              </Pane>\n              {this.state.formErrors.map((err, index)=>(\n                <Alert isRemoveable={true} onRemove={()=>{this.removeError(index)}} key={index} intent=\"danger\" title={err} marginBottom={15} />\n              ))}\n              <Pane padding=\"1em\">\n                <Heading size={400}>What is this?</Heading>\n                <Paragraph size={400} color=\"muted\">\n                  Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam laoreet non augue et faucibus. Ut arcu tellus, hendrerit id sem in, iaculis varius ipsum. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Etiam ac aliquet orci. Donec porta risus at nisi placerat pellentesque.\n                </Paragraph>\n              </Pane>\n            </div>\n            {this.state.saveBusy||this.state.validateBusy?(<div className=\"content-busy\"></div>):null}\n          </section>\n        ):null}\n        <SideSheet\n          isShown={this.state.isShown}\n          onCloseComplete={() => this.setState({ isShown: false })}\n        >\n          <Pane padding='.5em' backgroundColor='white' borderBottom=\"muted\">\n            <Button disabled={true} appearance=\"minimal\" iconBefore={EditIcon}>Edit</Button>\n          </Pane>\n          <Code codeString={this.state.formString} />\n        </SideSheet>\n        <Dialog\n          isShown={this.state.isDeleteShown}\n          hasHeader={false}\n          intent=\"danger\"\n          isConfirmLoading={this.state.busy}\n          onConfirm={() => {\n            this.setState({ busy: true })\n            ConfigService.deleteValue(this.props.schemaKey, this.state.formData.key.value)\n              .then(res => {\n                this.setState({ isDeleteShown: false })\n                this.props.history.goBack()\n                toaster.success(\n                  'Removed Successfully'\n                )\n              })\n          }}\n          onCloseComplete={() => this.setState({ isDeleteShown: false, busy: false })}\n          confirmLabel=\"Delete\"\n        >\n          <Heading size={600}>Are you sure?</Heading>\n          <Paragraph size={400} color=\"muted\">\n            Removing this {this.props.schemaPath} may effect other components that require it.\n          </Paragraph>\n        </Dialog>\n      </article>\n    )\n  }\n}\n\nexport default PageConfig__SchemaEdit;\n"],"sourceRoot":""}