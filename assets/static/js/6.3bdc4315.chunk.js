(this["webpackJsonpwp-factory"]=this["webpackJsonpwp-factory"]||[]).push([[6],{240:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(3),c=a(0),r=a.n(c),o=a(8),s=["M3.25 10.26l2.47 2.47 6.69-6.69-2.46-2.48-6.7 6.7zM.99 14.99l3.86-1.39-2.46-2.44-1.4 3.83zm12.25-14c-.48 0-.92.2-1.24.51l-1.44 1.44 2.47 2.47 1.44-1.44c.32-.32.51-.75.51-1.24.01-.95-.77-1.74-1.74-1.74z"],i=["M4.59 12.59l2.83 2.83 7.65-7.65-2.83-2.83-7.65 7.65zM2 18l4.41-1.59-2.81-2.79L2 18zM16 2c-.55 0-1.05.22-1.41.59l-1.65 1.65 2.83 2.83 1.65-1.65A2.006 2.006 0 0016 2z"],l=Object(c.memo)(Object(c.forwardRef)((function(e,t){return r.a.createElement(o.a,Object(n.a)({svgPaths16:s,svgPaths20:i,ref:t,name:"edit"},e))})))},250:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a(33),r=a(39),o=a.n(r),s=a(47),i=a(9),l=a(10),u=a(12),m=a(11),h=a(13),f=a(0),p=a.n(f),v=a(85),d=a(36),b=a(3),y=a(30);function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var O=Object(f.memo)(Object(f.forwardRef)((function(e,t){return p.a.createElement(y.a,Object(b.a)({is:"pre",marginTop:0,marginBottom:0},e,{ref:t}))})));O.propTypes=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},y.a.propTypes);var j=O,S=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={code:e.codeString||"// empty file"},n}return Object(l.a)(a,[{key:"render",value:function(){this.state.code;return p.a.createElement(j,{minHeight:"100%"},p.a.createElement("code",null,this.state.code))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.code!==t.code?{code:e.codeString}:null}}]),a}(f.Component),w=a(231),E=a(38),D=a(183),k=a(58),z=a(8),C=["M6.71 9.29a1.003 1.003 0 00-1.42 1.42l2 2a.997.997 0 001.6-.27h.01l2-4h-.01c.06-.13.11-.28.11-.44 0-.55-.45-1-1-1-.39 0-.72.23-.89.56H9.1l-1.38 2.76-1.01-1.03zM9 0H3c-.55 0-1 .45-1 1v14c0 .55.45 1 1 1h10c.55 0 1-.45 1-1V5L9 0zm3 14H4V2h4v4h4v8z"],V=["M12 0H4c-.55 0-1 .45-1 1v18c0 .55.45 1 1 1h13c.55 0 1-.45 1-1V6l-6-6zm4 18H5V2h6v5h5v11zm-8.29-6.71a1.003 1.003 0 00-1.42 1.42l3 3c.18.18.43.29.71.29.32 0 .59-.16.77-.38l.01.01 4-5-.01-.01c.14-.18.23-.38.23-.62 0-.55-.45-1-1-1-.32 0-.59.16-.77.38l-.01-.01-3.3 4.13-2.21-2.21z"],P=Object(f.memo)(Object(f.forwardRef)((function(e,t){return p.a.createElement(z.a,Object(b.a)({svgPaths16:C,svgPaths20:V,ref:t,name:"saved"},e))}))),M=a(225),H=a(228),B=a(240),N=["M14.49 3.99h-13c-.28 0-.5.22-.5.5s.22.5.5.5h.5v10c0 .55.45 1 1 1h10c.55 0 1-.45 1-1v-10h.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5zm-8.5 9c0 .55-.45 1-1 1s-1-.45-1-1v-6c0-.55.45-1 1-1s1 .45 1 1v6zm3 0c0 .55-.45 1-1 1s-1-.45-1-1v-6c0-.55.45-1 1-1s1 .45 1 1v6zm3 0c0 .55-.45 1-1 1s-1-.45-1-1v-6c0-.55.45-1 1-1s1 .45 1 1v6zm2-12h-4c0-.55-.45-1-1-1h-2c-.55 0-1 .45-1 1h-4c-.55 0-1 .45-1 1v1h14v-1c0-.55-.45-1-1-1z"],R=["M17 1h-5c0-.55-.45-1-1-1H9c-.55 0-1 .45-1 1H3c-.55 0-1 .45-1 1v1h16V2c0-.55-.45-1-1-1zm.5 3h-15c-.28 0-.5.22-.5.5s.22.5.5.5H3v14c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V5h.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5zM7 16c0 .55-.45 1-1 1s-1-.45-1-1V8c0-.55.45-1 1-1s1 .45 1 1v8zm4 0c0 .55-.45 1-1 1s-1-.45-1-1V8c0-.55.45-1 1-1s1 .45 1 1v8zm4 0c0 .55-.45 1-1 1s-1-.45-1-1V8c0-.55.45-1 1-1s1 .45 1 1v8z"],T=Object(f.memo)(Object(f.forwardRef)((function(e,t){return p.a.createElement(z.a,Object(b.a)({svgPaths16:N,svgPaths20:R,ref:t,name:"trash"},e))}))),K=a(238),_=a(203),x=a(184),L=a(53),J=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={ready:!1,busy:!0,isDeleteShown:!1,isShown:!1},n.mounted=!1,n.saveDocument=n.saveDocument.bind(Object(u.a)(n)),n.handleChange=n.handleChange.bind(Object(u.a)(n)),n.getSchemaValue=n.getSchemaValue.bind(Object(u.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.mounted=!0,this.getSchemaValue();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSchemaValue",value:function(){var e,t=this,a="new"===(null===(e=this.props.match)||void 0===e?void 0:e.params.id);d.a.getSchema(this.props.schemaKey).then((function(e){e.documentation;var r=e.schema,o=e.supportsTemplates;e.table;t.mounted&&d.a.getValue(t.props.schemaKey).then((function(e){var a;return(null===(a=t.props)||void 0===a?void 0:a.isSingular)?{}:e.filter((function(e){var a;return e.key===(null===(a=t.props.match.params)||void 0===a?void 0:a.id)}))})).then((function(e){var a;return(null===(a=t.props)||void 0===a?void 0:a.isSingular)?{}:!!e.length&&e[0]})).then((function(e){return a?{}:e})).then((function(e){if(t.mounted&&(e||a)){var s={};Object.keys(r).forEach((function(a){var o;s[a]=Object(c.a)(Object(c.a)({},r[a]),{},{key:a,errors:[],onChange:function(e,a){t.setState({formData:Object(c.a)(Object(c.a)({},t.state.formData),{},Object(n.a)({},e,Object(c.a)(Object(c.a)({},t.state.formData[e]),{},{value:a})))})},value:function(){var t;if(!(a in e)||void 0===e[a])return r[a].default||void 0;switch(null===(t=r[a])||void 0===t?void 0:t.type){case"string[]":return e[a].map((function(e){return"string"===typeof e?e:"".concat(e.id,"@").concat(e.version)}));case"keys":return function(){var t={};return Object.keys(r[a].keys).forEach((function(n){var c,o=n in e[a]?e[a][n]:null===(c=r[a][n])||void 0===c?void 0:c.default;void 0!==o&&(t[n]=o)})),t}();default:return e[a]}}()}),"repeater"===(null===(o=r[a])||void 0===o?void 0:o.type)&&(s[a].columns="columns"in s[a]?s[a].columns:[{label:"Key",key:"key"}])})),t.setState({isNew:a,supportsTemplates:o,formData:s,busy:!1,ready:!0})}}))}))}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"saveDocument",value:function(e){var t=this;e.preventDefault(),console.log(this.state.formData),d.a.setValue(this.props.schemaKey,this.state.formData).then((function(e){w.a.success("Saved Successfully"),t.mounted&&t.getSchemaValue()}))}},{key:"handleChange",value:function(e,t,a){}},{key:"render",value:function(){var e=this;return p.a.createElement("article",null,this.state.ready?p.a.createElement("section",{className:"split-content"},p.a.createElement("div",{className:"split-content__left"},this.state.busy?p.a.createElement(L.a,null):p.a.createElement(v.a,{className:"split-content__form",onChange:this.handleChange,data:this.state.formData},p.a.createElement(E.a,{display:"flex",padding:".5em",background:"tint2"},p.a.createElement(E.a,{flex:1,alignItems:"center",display:"flex"},p.a.createElement(D.a,{size:600},"".concat(this.props.schemaKey," Config"))),p.a.createElement(E.a,null,this.state.supportsTemplates?p.a.createElement(k.a,{appearance:"minimal",iconBefore:P},"Save as Template"):null,p.a.createElement(k.a,{appearance:"minimal",iconBefore:M.a},"Validate"))))),p.a.createElement("div",{className:"split-content__right"},p.a.createElement(E.a,{padding:".5em",backgroundColor:"white",borderBottom:"muted"},p.a.createElement(k.a,{appearance:"minimal",onClick:this.saveDocument,iconBefore:H.a},this.state.isNew?"Save":"Update"),p.a.createElement(k.a,{appearance:"minimal",iconBefore:B.a,onClick:function(t){t.preventDefault(),e.setState({isShown:!0})}},"Edit Json"),this.state.isNew?null:p.a.createElement(k.a,{appearance:"minimal",intent:"danger",marginRight:".5em",iconBefore:T,onClick:function(t){t.preventDefault(),e.setState({isDeleteShown:!0})}},"Delete")))):null,p.a.createElement(K.a,{isShown:this.state.isShown,onCloseComplete:function(){return e.setState({isShown:!1})}},p.a.createElement(S,{codeString:this.state.formString})),p.a.createElement(_.a,{isShown:this.state.isDeleteShown,hasHeader:!1,intent:"danger",isConfirmLoading:this.state.busy,onConfirm:function(){e.setState({busy:!0}),d.a.delete(e.props.schemaKey,e.state.formDoc.config.key).then((function(t){e.setState({isDeleteShown:!1}),e.props.history.goBack(),w.a.success("Removed Successfully",{description:"Connect your source to a destination to receive data."})}))},onCloseComplete:function(){return e.setState({isDeleteShown:!1,busy:!1})},confirmLabel:"Delete"},p.a.createElement(D.a,{size:600},"Are you sure?"),p.a.createElement(x.a,{size:400,color:"muted"},"Removing this ",this.props.schemaPath," may effect other components that require it.")))}}]),a}(f.Component);t.default=J}}]);
//# sourceMappingURL=6.3bdc4315.chunk.js.map