{"version":3,"sources":["../../../../src/icons/generated/EditIcon.js","../../../../src/typography/src/Pre.js","@components/Code.js","../../../../src/icons/generated/TrashIcon.js","@views/Config/SchemaEdit.js"],"names":["svgPaths16","svgPaths20","EditIcon","memo","forwardRef","props","ref","name","Pre","is","marginTop","marginBottom","Text","Code","state","code","codeString","this","minHeight","Component","TrashIcon","PageConfig__SchemaEdit","ready","busy","saveBusy","validateBusy","isDeleteShown","isShown","changes","formErrors","mounted","saveDocument","bind","getSchemaValue","showJson","validateJson","removeError","updateFormData","a","isNew","match","params","id","ConfigService","getSchema","schemaKey","then","documentation","schema","supportsTemplates","table","getValue","SchemaValue","isSingular","filter","item","key","length","SchemaFormValue","Object","keys","forEach","errors","onChange","value","formData","undefined","default","type","map","version","Values","k","Value","columns","label","setState","e","preventDefault","validateValue","res","toaster","danger","success","setValue","jsonObj","Array","isArray","formString","JSON","stringify","index","splice","data","className","Busy","Pane","display","padding","background","flex","alignItems","Heading","size","Button","appearance","onClick","isLoading","iconBefore","TickIcon","Form","backgroundColor","borderBottom","disabled","FloppyDiskIcon","intent","marginRight","err","Alert","isRemoveable","onRemove","title","Paragraph","color","SideSheet","onCloseComplete","Dialog","hasHeader","isConfirmLoading","onConfirm","deleteValue","history","goBack","confirmLabel","schemaPath"],"mappings":"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","file":"static/js/6.f0230fc4.chunk.js","sourcesContent":["import React, { memo, forwardRef } from 'react'\nimport Icon from '../src/Icon'\n\nconst svgPaths16 = [\n  'M3.25 10.26l2.47 2.47 6.69-6.69-2.46-2.48-6.7 6.7zM.99 14.99l3.86-1.39-2.46-2.44-1.4 3.83zm12.25-14c-.48 0-.92.2-1.24.51l-1.44 1.44 2.47 2.47 1.44-1.44c.32-.32.51-.75.51-1.24.01-.95-.77-1.74-1.74-1.74z'\n]\nconst svgPaths20 = [\n  'M4.59 12.59l2.83 2.83 7.65-7.65-2.83-2.83-7.65 7.65zM2 18l4.41-1.59-2.81-2.79L2 18zM16 2c-.55 0-1.05.22-1.41.59l-1.65 1.65 2.83 2.83 1.65-1.65A2.006 2.006 0 0016 2z'\n]\n\nexport const EditIcon = memo(\n  forwardRef(function EditIcon(props, ref) {\n    return (\n      <Icon\n        svgPaths16={svgPaths16}\n        svgPaths20={svgPaths20}\n        ref={ref}\n        name=\"edit\"\n        {...props}\n      />\n    )\n  })\n)\n","import React, { memo, forwardRef } from 'react'\nimport Text from './Text'\n\nconst Pre = memo(\n  forwardRef(function Pre(props, ref) {\n    return <Text is=\"pre\" marginTop={0} marginBottom={0} {...props} ref={ref} />\n  })\n)\n\nPre.propTypes = {\n  ...Text.propTypes\n}\n\nexport default Pre\n","import React, { Component } from 'react'\nimport { Pre } from 'evergreen-ui'\n// import MonacoEditor from 'react-monaco-editor';\n\nclass Code extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      code: props.codeString || '// empty file'\n    }\n  }\n  // editorDidMount(editor, monaco) {\n  //   console.log('editorDidMount', editor);\n  //   editor.focus();\n  // }\n  // onChange(newValue, e) {\n  //   console.log('onChange', newValue, e);\n  // }\n  static getDerivedStateFromProps(props, state)\n  {\n    if (props.code !== state.code)\n      return {\n        code: props.codeString\n      };\n    return null;\n  }\n  render() {\n    const code = this.state.code;\n    return (\n      <Pre minHeight={'100%'}>\n        <code>{this.state.code}</code>\n      </Pre>\n      // <MonacoEditor\n      //   // width=\"800\"\n      //   height=\"600\"\n      //   language=\"json\"\n      //   theme=\"vs-dark\"\n      //   value={code}\n      //   options={options}\n      //   // onChange={this.onChange}\n      //   // editorDidMount={this.editorDidMount}\n      // />\n    )\n  }\n}\n\nexport default Code;\n","import React, { memo, forwardRef } from 'react'\nimport Icon from '../src/Icon'\n\nconst svgPaths16 = [\n  'M14.49 3.99h-13c-.28 0-.5.22-.5.5s.22.5.5.5h.5v10c0 .55.45 1 1 1h10c.55 0 1-.45 1-1v-10h.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5zm-8.5 9c0 .55-.45 1-1 1s-1-.45-1-1v-6c0-.55.45-1 1-1s1 .45 1 1v6zm3 0c0 .55-.45 1-1 1s-1-.45-1-1v-6c0-.55.45-1 1-1s1 .45 1 1v6zm3 0c0 .55-.45 1-1 1s-1-.45-1-1v-6c0-.55.45-1 1-1s1 .45 1 1v6zm2-12h-4c0-.55-.45-1-1-1h-2c-.55 0-1 .45-1 1h-4c-.55 0-1 .45-1 1v1h14v-1c0-.55-.45-1-1-1z'\n]\nconst svgPaths20 = [\n  'M17 1h-5c0-.55-.45-1-1-1H9c-.55 0-1 .45-1 1H3c-.55 0-1 .45-1 1v1h16V2c0-.55-.45-1-1-1zm.5 3h-15c-.28 0-.5.22-.5.5s.22.5.5.5H3v14c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V5h.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5zM7 16c0 .55-.45 1-1 1s-1-.45-1-1V8c0-.55.45-1 1-1s1 .45 1 1v8zm4 0c0 .55-.45 1-1 1s-1-.45-1-1V8c0-.55.45-1 1-1s1 .45 1 1v8zm4 0c0 .55-.45 1-1 1s-1-.45-1-1V8c0-.55.45-1 1-1s1 .45 1 1v8z'\n]\n\nexport const TrashIcon = memo(\n  forwardRef(function TrashIcon(props, ref) {\n    return (\n      <Icon\n        svgPaths16={svgPaths16}\n        svgPaths20={svgPaths20}\n        ref={ref}\n        name=\"trash\"\n        {...props}\n      />\n    )\n  })\n)\n","import React, { Component } from 'react'\n// import { withRouter } from 'react-router-dom'\nimport Form from '../../@components/Form';\nimport ConfigService from '../../@services/Config';\nimport Code from '../../@components/Code';\nimport Busy from '../../@components/Busy';\n\nimport { SideSheet, Pane, Dialog, EditIcon, TickIcon, Alert, TrashIcon, Heading, Paragraph, Button, FloppyDiskIcon, toaster } from 'evergreen-ui'\n\nclass PageConfig__SchemaEdit extends Component {\n\n  constructor(props)\n  {\n    super(props)\n    this.state = {\n      ready: false,\n      busy: true,\n      saveBusy: false,\n      validateBusy: false,\n      isDeleteShown: false,\n      isShown: false,\n      changes: false,\n      formErrors: []\n    }\n    this.mounted = false\n    this.saveDocument = this.saveDocument.bind(this)\n    this.getSchemaValue = this.getSchemaValue.bind(this)\n    this.showJson = this.showJson.bind(this)\n    this.validateJson = this.validateJson.bind(this)\n    this.removeError = this.removeError.bind(this)\n    this.updateFormData = this.updateFormData.bind(this)\n  }\n  \n  async componentDidMount()\n  {\n\n    this.mounted = true\n    \n    this.getSchemaValue()\n\n  }\n\n  getSchemaValue()\n  {\n\n    var isNew = this.props.match?.params.id === \"new\"\n\n    ConfigService.getSchema(this.props.schemaKey)\n      .then(({ documentation, schema, supportsTemplates, table }) => {\n\n        if (!this.mounted) return;\n\n        ConfigService.getValue(this.props.schemaKey)\n          .then(SchemaValue => this.props?.isSingular ? {} : SchemaValue.filter(item => item.key === this.props.match.params?.id))\n          .then(SchemaValue => this.props?.isSingular ? {} : (SchemaValue.length ? SchemaValue[0] : false))\n          .then(SchemaValue => isNew ? {} : SchemaValue)\n          .then(SchemaValue => {\n\n            if (!this.mounted) return;\n            \n            if (!SchemaValue && !isNew) return;\n\n            var SchemaFormValue = {}\n\n            Object.keys(schema).forEach(key => {\n\n              SchemaFormValue[key] = {\n                ...schema[key],\n                key: key,\n                errors: [],\n                onChange: (key, value) => {\n                  this.updateFormData({...this.state.formData, [key]: { ...this.state.formData[key], value: value }})\n                },\n                value: (() => {\n                  \n                  if (!(key in SchemaValue) || SchemaValue[key] === undefined) return schema[key].default || undefined;\n\n                  switch (schema[key]?.type)\n                  {\n                    case 'string[]':\n                      return SchemaValue[key].map(item => { return typeof item === \"string\" ? (item) : (`${item.id}@${item.version}`) });\n                    case 'keys':\n                      return (() => {\n                        var Values = {}\n                        Object.keys(schema[key].keys).forEach(k => {\n                          var Value = (k in SchemaValue[key]) ? SchemaValue[key][k] : (schema[key][k]?.default);\n                          if (undefined !== Value) Values[k] = Value;\n                        })\n                        return Values\n                      })();\n                    default:\n                      return SchemaValue[key];\n                  }\n\n                })()\n              }\n\n              // post value set field mods\n              if (schema[key]?.type === 'repeater')\n              {\n                SchemaFormValue[key].columns = 'columns' in SchemaFormValue[key] ? SchemaFormValue[key].columns : [{label:'Key', key: 'key'}];\n              }\n\n            })\n\n            this.setState({\n              isNew: isNew,\n              supportsTemplates: supportsTemplates,\n              formData: SchemaFormValue,\n              saveBusy: false,\n              busy: false,\n              ready: true\n            })\n\n          })\n        \n      })\n  }\n\n  componentWillUnmount()\n  {\n    this.mounted = false\n  }\n\n  validateJson(e)\n  {\n    e.preventDefault()\n    this.setState({\n      validateBusy: true\n    })\n    ConfigService.validateValue(this.props.schemaKey, this.state.formData)\n      .then(res => {\n\n        if (!this.mounted) return;\n\n        if (res?.errors) {\n        \n          toaster.danger(`${res.errors.length} Error(s)`)\n\n          this.setState({\n            formErrors: res.errors,\n            validateBusy: false\n          })\n\n          return;\n\n        }\n        \n        toaster.success('Valid 👍')\n\n        this.setState({\n          validateBusy: false\n        })\n\n      })\n  }\n\n  saveDocument(e)\n  {\n    e.preventDefault()\n    this.setState({\n      saveBusy: true\n    })\n    ConfigService.setValue(this.props.schemaKey, this.state.formData)\n      .then((res)=>{\n\n        if (!this.mounted) return;\n\n        if (res?.errors) {\n        \n          toaster.danger(`${res.errors.length} Error(s)`)\n\n          this.setState({\n            formErrors: res.errors,\n            saveBusy: false\n          })\n\n          return;\n\n        }\n        \n        toaster.success('Saved')\n\n        this.setState({\n          saveBusy: false\n        })\n\n        this.getSchemaValue()\n\n      })\n  }\n\n  showJson(e)\n  {\n    e.preventDefault();\n    var jsonObj = {}\n    Object.keys(this.state.formData).forEach(key => {\n      if (undefined !== this.state.formData[key].value) {\n        if (Array.isArray(this.state.formData[key].value) && this.state.formData[key].value.length === 0) return;\n        jsonObj[key] = this.state.formData[key].value\n      }\n    })\n    this.setState({\n      formString: JSON.stringify(jsonObj, null, 4),\n      isShown: true\n    })\n  }\n\n  removeError(index)\n  {\n    var formErrors = this.state.formErrors.splice(index, 1)\n    formErrors.splice(index, 1)\n    this.setState({\n      formErrors: formErrors\n    })\n  }\n\n  updateFormData(data)\n  {\n    this.setState({\n      formData: data,\n      changes: true\n    })\n  }\n\n  render() {\n    return (\n      <article>\n        {this.state.ready?(\n          <section className=\"split-content\">\n            <div className=\"split-content__left\">\n              {(!this.state.busy)?([\n                <Pane display=\"flex\" padding=\".5em\" background=\"tint2\">\n                  <Pane flex={1} alignItems=\"center\" display=\"flex\">\n                    <Heading size={600}>{`${this.props.schemaKey} Config`}</Heading>\n                  </Pane>\n                  <Pane>\n                    <Button appearance=\"minimal\" onClick={this.validateJson} isLoading={this.state.validateBusy} iconBefore={this.state.validateBusy?(null):(TickIcon)}>Validate</Button>\n                  </Pane>\n                </Pane>,\n                <Form className=\"split-content__form\" data={this.state.formData}></Form>\n              ]):<Busy/>}\n            </div>\n            <div className=\"split-content__right\">\n              <Pane padding='.5em' backgroundColor='white' borderBottom=\"muted\">\n                <Button disabled={!this.state.changes} appearance=\"minimal\" onClick={this.saveDocument} isLoading={this.state.saveBusy} iconBefore={this.state.saveBusy?(null):(FloppyDiskIcon)}>{this.state.isNew?'Save':'Update'}</Button>\n                <Button appearance=\"minimal\" iconBefore={EditIcon} onClick={this.showJson}>View Json</Button>\n                {!this.state.isNew?(<Button appearance=\"minimal\" intent=\"danger\" marginRight={'.5em'} iconBefore={TrashIcon} onClick={(e) => { e.preventDefault(); this.setState({ isDeleteShown: true })}}>Delete</Button>):(null)}\n              </Pane>\n              {this.state.formErrors.map((err, index)=>(\n                <Alert isRemoveable={true} onRemove={()=>{this.removeError(index)}} key={index} intent=\"danger\" title={err} marginBottom={15} />\n              ))}\n              <Pane padding=\"1em\">\n                <Heading size={400}>What is this?</Heading>\n                <Paragraph size={400} color=\"muted\">\n                  Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam laoreet non augue et faucibus. Ut arcu tellus, hendrerit id sem in, iaculis varius ipsum. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Etiam ac aliquet orci. Donec porta risus at nisi placerat pellentesque.\n                </Paragraph>\n              </Pane>\n            </div>\n            {this.state.saveBusy||this.state.validateBusy?(<div className=\"content-busy\"></div>):null}\n          </section>\n        ):null}\n        <SideSheet\n          isShown={this.state.isShown}\n          onCloseComplete={() => this.setState({ isShown: false })}\n        >\n          <Pane padding='.5em' backgroundColor='white' borderBottom=\"muted\">\n            <Button disabled={true} appearance=\"minimal\" iconBefore={EditIcon}>Edit</Button>\n          </Pane>\n          <Code codeString={this.state.formString} />\n        </SideSheet>\n        <Dialog\n          isShown={this.state.isDeleteShown}\n          hasHeader={false}\n          intent=\"danger\"\n          isConfirmLoading={this.state.busy}\n          onConfirm={() => {\n            this.setState({ busy: true })\n            ConfigService.deleteValue(this.props.schemaKey, this.state.formData.key.value)\n              .then(res => {\n                this.setState({ isDeleteShown: false })\n                this.props.history.goBack()\n                toaster.success(\n                  'Removed Successfully'\n                )\n              })\n          }}\n          onCloseComplete={() => this.setState({ isDeleteShown: false, busy: false })}\n          confirmLabel=\"Delete\"\n        >\n          <Heading size={600}>Are you sure?</Heading>\n          <Paragraph size={400} color=\"muted\">\n            Removing this {this.props.schemaPath} may effect other components that require it.\n          </Paragraph>\n        </Dialog>\n      </article>\n    )\n  }\n}\n\nexport default PageConfig__SchemaEdit;\n"],"sourceRoot":""}