{"version":3,"sources":["../../../../src/icons/generated/EditIcon.js","../../../../src/typography/src/Pre.js","@components/Code.js","../../../../src/icons/generated/TrashIcon.js","@views/Config/SchemaEdit.js"],"names":["svgPaths16","svgPaths20","EditIcon","memo","forwardRef","props","ref","name","Pre","is","marginTop","marginBottom","Text","Code","state","code","codeString","this","minHeight","Component","TrashIcon","PageConfig__SchemaEdit","ready","busy","saveBusy","validateBusy","isDeleteShown","isShown","formErrors","mounted","saveDocument","bind","getSchemaValue","showJson","validateJson","removeError","a","isNew","match","params","id","ConfigService","getSchema","schemaKey","then","documentation","schema","supportsTemplates","table","getValue","SchemaValue","isSingular","filter","item","key","length","SchemaFormValue","Object","keys","forEach","errors","onChange","value","setState","formData","undefined","default","type","map","version","Values","k","Value","columns","label","e","preventDefault","validateValue","res","toaster","danger","success","setValue","jsonObj","Array","isArray","formString","JSON","stringify","index","splice","className","Busy","Form","data","Pane","display","padding","background","flex","alignItems","Heading","size","Button","appearance","onClick","isLoading","iconBefore","TickIcon","backgroundColor","borderBottom","FloppyDiskIcon","intent","marginRight","err","Alert","isRemoveable","onRemove","title","Paragraph","color","SideSheet","onCloseComplete","disabled","Dialog","hasHeader","isConfirmLoading","onConfirm","deleteValue","history","goBack","confirmLabel","schemaPath"],"mappings":"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","file":"static/js/6.ead4304a.chunk.js","sourcesContent":["import React, { memo, forwardRef } from 'react'\nimport Icon from '../src/Icon'\n\nconst svgPaths16 = [\n  'M3.25 10.26l2.47 2.47 6.69-6.69-2.46-2.48-6.7 6.7zM.99 14.99l3.86-1.39-2.46-2.44-1.4 3.83zm12.25-14c-.48 0-.92.2-1.24.51l-1.44 1.44 2.47 2.47 1.44-1.44c.32-.32.51-.75.51-1.24.01-.95-.77-1.74-1.74-1.74z'\n]\nconst svgPaths20 = [\n  'M4.59 12.59l2.83 2.83 7.65-7.65-2.83-2.83-7.65 7.65zM2 18l4.41-1.59-2.81-2.79L2 18zM16 2c-.55 0-1.05.22-1.41.59l-1.65 1.65 2.83 2.83 1.65-1.65A2.006 2.006 0 0016 2z'\n]\n\nexport const EditIcon = memo(\n  forwardRef(function EditIcon(props, ref) {\n    return (\n      <Icon\n        svgPaths16={svgPaths16}\n        svgPaths20={svgPaths20}\n        ref={ref}\n        name=\"edit\"\n        {...props}\n      />\n    )\n  })\n)\n","import React, { memo, forwardRef } from 'react'\nimport Text from './Text'\n\nconst Pre = memo(\n  forwardRef(function Pre(props, ref) {\n    return <Text is=\"pre\" marginTop={0} marginBottom={0} {...props} ref={ref} />\n  })\n)\n\nPre.propTypes = {\n  ...Text.propTypes\n}\n\nexport default Pre\n","import React, { Component } from 'react'\nimport { Pre } from 'evergreen-ui'\n// import MonacoEditor from 'react-monaco-editor';\n\nclass Code extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      code: props.codeString || '// empty file'\n    }\n  }\n  // editorDidMount(editor, monaco) {\n  //   console.log('editorDidMount', editor);\n  //   editor.focus();\n  // }\n  // onChange(newValue, e) {\n  //   console.log('onChange', newValue, e);\n  // }\n  static getDerivedStateFromProps(props, state)\n  {\n    if (props.code !== state.code)\n      return {\n        code: props.codeString\n      };\n    return null;\n  }\n  render() {\n    const code = this.state.code;\n    return (\n      <Pre minHeight={'100%'}>\n        <code>{this.state.code}</code>\n      </Pre>\n      // <MonacoEditor\n      //   // width=\"800\"\n      //   height=\"600\"\n      //   language=\"json\"\n      //   theme=\"vs-dark\"\n      //   value={code}\n      //   options={options}\n      //   // onChange={this.onChange}\n      //   // editorDidMount={this.editorDidMount}\n      // />\n    )\n  }\n}\n\nexport default Code;\n","import React, { memo, forwardRef } from 'react'\nimport Icon from '../src/Icon'\n\nconst svgPaths16 = [\n  'M14.49 3.99h-13c-.28 0-.5.22-.5.5s.22.5.5.5h.5v10c0 .55.45 1 1 1h10c.55 0 1-.45 1-1v-10h.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5zm-8.5 9c0 .55-.45 1-1 1s-1-.45-1-1v-6c0-.55.45-1 1-1s1 .45 1 1v6zm3 0c0 .55-.45 1-1 1s-1-.45-1-1v-6c0-.55.45-1 1-1s1 .45 1 1v6zm3 0c0 .55-.45 1-1 1s-1-.45-1-1v-6c0-.55.45-1 1-1s1 .45 1 1v6zm2-12h-4c0-.55-.45-1-1-1h-2c-.55 0-1 .45-1 1h-4c-.55 0-1 .45-1 1v1h14v-1c0-.55-.45-1-1-1z'\n]\nconst svgPaths20 = [\n  'M17 1h-5c0-.55-.45-1-1-1H9c-.55 0-1 .45-1 1H3c-.55 0-1 .45-1 1v1h16V2c0-.55-.45-1-1-1zm.5 3h-15c-.28 0-.5.22-.5.5s.22.5.5.5H3v14c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V5h.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5zM7 16c0 .55-.45 1-1 1s-1-.45-1-1V8c0-.55.45-1 1-1s1 .45 1 1v8zm4 0c0 .55-.45 1-1 1s-1-.45-1-1V8c0-.55.45-1 1-1s1 .45 1 1v8zm4 0c0 .55-.45 1-1 1s-1-.45-1-1V8c0-.55.45-1 1-1s1 .45 1 1v8z'\n]\n\nexport const TrashIcon = memo(\n  forwardRef(function TrashIcon(props, ref) {\n    return (\n      <Icon\n        svgPaths16={svgPaths16}\n        svgPaths20={svgPaths20}\n        ref={ref}\n        name=\"trash\"\n        {...props}\n      />\n    )\n  })\n)\n","import React, { Component } from 'react'\n// import { withRouter } from 'react-router-dom'\nimport Form from '../../@components/Form';\nimport ConfigService from '../../@services/Config';\nimport Code from '../../@components/Code';\nimport Busy from '../../@components/Busy';\n\nimport { SideSheet, Pane, Dialog, EditIcon, TickIcon, SavedIcon, Alert, TrashIcon, Heading, Paragraph, Button, FloppyDiskIcon, toaster, Spinner } from 'evergreen-ui'\n\nclass PageConfig__SchemaEdit extends Component {\n\n  constructor(props)\n  {\n    super(props)\n    this.state = {\n      ready: false,\n      busy: true,\n      saveBusy: false,\n      validateBusy: false,\n      isDeleteShown: false,\n      isShown: false,\n      formErrors: []\n    }\n    this.mounted = false\n    this.saveDocument = this.saveDocument.bind(this)\n    this.getSchemaValue = this.getSchemaValue.bind(this)\n    this.showJson = this.showJson.bind(this)\n    this.validateJson = this.validateJson.bind(this)\n    this.removeError = this.removeError.bind(this)\n  }\n  \n  async componentDidMount()\n  {\n\n    this.mounted = true\n    \n    this.getSchemaValue()\n\n  }\n\n  getSchemaValue()\n  {\n\n    var isNew = this.props.match?.params.id === \"new\"\n\n    ConfigService.getSchema(this.props.schemaKey)\n      .then(({ documentation, schema, supportsTemplates, table }) => {\n\n        if (!this.mounted) return;\n\n        ConfigService.getValue(this.props.schemaKey)\n          .then(SchemaValue => this.props?.isSingular ? {} : SchemaValue.filter(item => item.key === this.props.match.params?.id))\n          .then(SchemaValue => this.props?.isSingular ? {} : (SchemaValue.length ? SchemaValue[0] : false))\n          .then(SchemaValue => isNew ? {} : SchemaValue)\n          .then(SchemaValue => {\n\n            if (!this.mounted) return;\n            \n            if (!SchemaValue && !isNew) return;\n\n            var SchemaFormValue = {}\n\n            Object.keys(schema).forEach(key => {\n\n              SchemaFormValue[key] = {\n                ...schema[key],\n                key: key,\n                errors: [],\n                onChange: (key, value) => {\n                  this.setState({\n                    formData: {...this.state.formData, [key]: { ...this.state.formData[key], value: value }}\n                  })\n                },\n                value: (() => {\n                  \n                  if (!(key in SchemaValue) || SchemaValue[key] === undefined) return schema[key].default || undefined;\n\n                  switch (schema[key]?.type)\n                  {\n                    case 'string[]':\n                      return SchemaValue[key].map(item => { return typeof item === \"string\" ? (item) : (`${item.id}@${item.version}`) });\n                    case 'keys':\n                      return (() => {\n                        var Values = {}\n                        Object.keys(schema[key].keys).forEach(k => {\n                          var Value = (k in SchemaValue[key]) ? SchemaValue[key][k] : (schema[key][k]?.default);\n                          if (undefined !== Value) Values[k] = Value;\n                        })\n                        return Values\n                      })();\n                    default:\n                      return SchemaValue[key];\n                  }\n\n                })()\n              }\n\n              // post value set field mods\n              if (schema[key]?.type === 'repeater')\n              {\n                SchemaFormValue[key].columns = 'columns' in SchemaFormValue[key] ? SchemaFormValue[key].columns : [{label:'Key', key: 'key'}];\n              }\n\n            })\n\n            this.setState({\n              isNew: isNew,\n              supportsTemplates: supportsTemplates,\n              formData: SchemaFormValue,\n              saveBusy: false,\n              busy: false,\n              ready: true\n            })\n\n          })\n        \n      })\n  }\n\n  componentWillUnmount()\n  {\n    this.mounted = false\n  }\n\n  validateJson(e)\n  {\n    e.preventDefault()\n    this.setState({\n      validateBusy: true\n    })\n    ConfigService.validateValue(this.props.schemaKey, this.state.formData)\n      .then(res => {\n\n        if (!this.mounted) return;\n\n        if (res?.errors) {\n        \n          toaster.danger(`${res.errors.length} Error(s)`)\n\n          this.setState({\n            formErrors: res.errors,\n            validateBusy: false\n          })\n\n          return;\n\n        }\n        \n        toaster.success('Valid 👍')\n\n        this.setState({\n          validateBusy: false\n        })\n\n      })\n  }\n\n  saveDocument(e)\n  {\n    e.preventDefault()\n    this.setState({\n      saveBusy: true\n    })\n    ConfigService.setValue(this.props.schemaKey, this.state.formData)\n      .then((res)=>{\n\n        if (!this.mounted) return;\n\n        if (res?.errors) {\n        \n          toaster.danger(`${res.errors.length} Error(s)`)\n\n          this.setState({\n            formErrors: res.errors,\n            saveBusy: false\n          })\n\n          return;\n\n        }\n        \n        toaster.success('Saved')\n\n        this.setState({\n          saveBusy: false\n        })\n\n        this.getSchemaValue()\n\n      })\n  }\n\n  showJson(e)\n  {\n    e.preventDefault();\n    var jsonObj = {}\n    Object.keys(this.state.formData).forEach(key => {\n      if (undefined !== this.state.formData[key].value) {\n        if (Array.isArray(this.state.formData[key].value) && this.state.formData[key].value.length === 0) return;\n        jsonObj[key] = this.state.formData[key].value\n      }\n    })\n    this.setState({\n      formString: JSON.stringify(jsonObj, null, 4),\n      isShown: true\n    })\n  }\n\n  removeError(index)\n  {\n    var formErrors = this.state.formErrors.splice(index, 1)\n    formErrors.splice(index, 1)\n    this.setState({\n      formErrors: formErrors\n    })\n  }\n\n  render() {\n    return (\n      <article>\n        {this.state.ready?(\n          <section className=\"split-content\">\n            <div className=\"split-content__left\">\n              {(!this.state.busy)?(\n                <Form className=\"split-content__form\" data={this.state.formData}>\n                  <Pane display=\"flex\" padding=\".5em\" background=\"tint2\">\n                    <Pane flex={1} alignItems=\"center\" display=\"flex\">\n                      <Heading size={600}>{`${this.props.schemaKey} Config`}</Heading>\n                    </Pane>\n                    <Pane>\n                      <Button appearance=\"minimal\" onClick={this.validateJson} isLoading={this.state.validateBusy} iconBefore={this.state.validateBusy?(null):(TickIcon)}>Validate</Button>\n                    </Pane>\n                  </Pane>\n                </Form>\n              ):<Busy/>}\n            </div>\n            <div className=\"split-content__right\">\n              <Pane padding='.5em' backgroundColor='white' borderBottom=\"muted\">\n                <Button appearance=\"minimal\" onClick={this.saveDocument} isLoading={this.state.saveBusy} iconBefore={this.state.saveBusy?(null):(FloppyDiskIcon)}>{this.state.isNew?'Save':'Update'}</Button>\n                <Button appearance=\"minimal\" iconBefore={EditIcon} onClick={this.showJson}>View Json</Button>\n                {!this.state.isNew?(<Button appearance=\"minimal\" intent=\"danger\" marginRight={'.5em'} iconBefore={TrashIcon} onClick={(e) => { e.preventDefault(); this.setState({ isDeleteShown: true })}}>Delete</Button>):(null)}\n              </Pane>\n              {this.state.formErrors.map((err, index)=>(\n                <Alert isRemoveable={true} onRemove={()=>{this.removeError(index)}} key={index} intent=\"danger\" title={err} marginBottom={15} />\n              ))}\n              <Pane padding=\".5em\">\n                <Heading size={400}>What is this?</Heading>\n                <Paragraph size={400} color=\"muted\">\n                  Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam laoreet non augue et faucibus. Ut arcu tellus, hendrerit id sem in, iaculis varius ipsum. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Etiam ac aliquet orci. Donec porta risus at nisi placerat pellentesque.\n                </Paragraph>\n              </Pane>\n            </div>\n            {this.state.saveBusy||this.state.validateBusy?(<div className=\"content-busy\"></div>):null}\n          </section>\n        ):null}\n        <SideSheet\n          isShown={this.state.isShown}\n          onCloseComplete={() => this.setState({ isShown: false })}\n        >\n          <Pane padding='.5em' backgroundColor='white' borderBottom=\"muted\">\n            <Button disabled={true} appearance=\"minimal\" iconBefore={EditIcon}>Edit</Button>\n          </Pane>\n          <Code codeString={this.state.formString} />\n        </SideSheet>\n        <Dialog\n          isShown={this.state.isDeleteShown}\n          hasHeader={false}\n          intent=\"danger\"\n          isConfirmLoading={this.state.busy}\n          onConfirm={() => {\n            this.setState({ busy: true })\n            ConfigService.deleteValue(this.props.schemaKey, this.state.formData.key.value)\n              .then(res => {\n                this.setState({ isDeleteShown: false })\n                this.props.history.goBack()\n                toaster.success(\n                  'Removed Successfully'\n                )\n              })\n          }}\n          onCloseComplete={() => this.setState({ isDeleteShown: false, busy: false })}\n          confirmLabel=\"Delete\"\n        >\n          <Heading size={600}>Are you sure?</Heading>\n          <Paragraph size={400} color=\"muted\">\n            Removing this {this.props.schemaPath} may effect other components that require it.\n          </Paragraph>\n        </Dialog>\n      </article>\n    )\n  }\n}\n\nexport default PageConfig__SchemaEdit;\n"],"sourceRoot":""}