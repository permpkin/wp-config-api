(this["webpackJsonpwp-factory"]=this["webpackJsonpwp-factory"]||[]).push([[6],{241:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(3),r=a(0),s=a.n(r),o=a(8),i=["M3.25 10.26l2.47 2.47 6.69-6.69-2.46-2.48-6.7 6.7zM.99 14.99l3.86-1.39-2.46-2.44-1.4 3.83zm12.25-14c-.48 0-.92.2-1.24.51l-1.44 1.44 2.47 2.47 1.44-1.44c.32-.32.51-.75.51-1.24.01-.95-.77-1.74-1.74-1.74z"],c=["M4.59 12.59l2.83 2.83 7.65-7.65-2.83-2.83-7.65 7.65zM2 18l4.41-1.59-2.81-2.79L2 18zM16 2c-.55 0-1.05.22-1.41.59l-1.65 1.65 2.83 2.83 1.65-1.65A2.006 2.006 0 0016 2z"],u=Object(r.memo)(Object(r.forwardRef)((function(e,t){return s.a.createElement(o.a,Object(n.a)({svgPaths16:i,svgPaths20:c,ref:t,name:"edit"},e))})))},254:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(22),s=a(39),o=a.n(s),i=a(47),c=a(9),u=a(10),l=a(12),m=a(11),h=a(13),v=a(0),d=a.n(v),f=a(85),p=a(34),y=a(3),b=a(31);function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var O=Object(v.memo)(Object(v.forwardRef)((function(e,t){return d.a.createElement(b.a,Object(y.a)({is:"pre",marginTop:0,marginBottom:0},e,{ref:t}))})));O.propTypes=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},b.a.propTypes);var E=O,j=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={code:e.codeString||"// empty file"},n}return Object(u.a)(a,[{key:"render",value:function(){this.state.code;return d.a.createElement(E,{minHeight:"100%"},d.a.createElement("code",null,this.state.code))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.code!==t.code?{code:e.codeString}:null}}]),a}(v.Component),S=a(48),D=a(235),w=a(38),k=a(184),B=a(58),z=a(229),C=a(226),V=a(241),P=a(8),J=["M14.49 3.99h-13c-.28 0-.5.22-.5.5s.22.5.5.5h.5v10c0 .55.45 1 1 1h10c.55 0 1-.45 1-1v-10h.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5zm-8.5 9c0 .55-.45 1-1 1s-1-.45-1-1v-6c0-.55.45-1 1-1s1 .45 1 1v6zm3 0c0 .55-.45 1-1 1s-1-.45-1-1v-6c0-.55.45-1 1-1s1 .45 1 1v6zm3 0c0 .55-.45 1-1 1s-1-.45-1-1v-6c0-.55.45-1 1-1s1 .45 1 1v6zm2-12h-4c0-.55-.45-1-1-1h-2c-.55 0-1 .45-1 1h-4c-.55 0-1 .45-1 1v1h14v-1c0-.55-.45-1-1-1z"],N=["M17 1h-5c0-.55-.45-1-1-1H9c-.55 0-1 .45-1 1H3c-.55 0-1 .45-1 1v1h16V2c0-.55-.45-1-1-1zm.5 3h-15c-.28 0-.5.22-.5.5s.22.5.5.5H3v14c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V5h.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5zM7 16c0 .55-.45 1-1 1s-1-.45-1-1V8c0-.55.45-1 1-1s1 .45 1 1v8zm4 0c0 .55-.45 1-1 1s-1-.45-1-1V8c0-.55.45-1 1-1s1 .45 1 1v8zm4 0c0 .55-.45 1-1 1s-1-.45-1-1V8c0-.55.45-1 1-1s1 .45 1 1v8z"],M=Object(v.memo)(Object(v.forwardRef)((function(e,t){return d.a.createElement(P.a,Object(y.a)({svgPaths16:J,svgPaths20:N,ref:t,name:"trash"},e))}))),R=a(89),K=a(185),L=a(239),T=a(204),_=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={ready:!1,busy:!0,saveBusy:!1,validateBusy:!1,isDeleteShown:!1,isShown:!1,changes:!1,formErrors:[]},n.mounted=!1,n.saveDocument=n.saveDocument.bind(Object(l.a)(n)),n.getSchemaValue=n.getSchemaValue.bind(Object(l.a)(n)),n.showJson=n.showJson.bind(Object(l.a)(n)),n.validateJson=n.validateJson.bind(Object(l.a)(n)),n.removeError=n.removeError.bind(Object(l.a)(n)),n.updateFormData=n.updateFormData.bind(Object(l.a)(n)),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.mounted=!0,this.getSchemaValue();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSchemaValue",value:function(){var e,t=this,a="new"===(null===(e=this.props.match)||void 0===e?void 0:e.params.id);p.a.getSchema(this.props.schemaKey).then((function(e){e.documentation;var s=e.schema,o=e.supportsTemplates;e.table;t.mounted&&p.a.getValue(t.props.schemaKey).then((function(e){var a;return(null===(a=t.props)||void 0===a?void 0:a.isSingular)?{}:e.filter((function(e){var a;return e.key===(null===(a=t.props.match.params)||void 0===a?void 0:a.id)}))})).then((function(e){var a;return(null===(a=t.props)||void 0===a?void 0:a.isSingular)?{}:!!e.length&&e[0]})).then((function(e){return a?{}:e})).then((function(e){if(t.mounted&&(e||a)){var i={};Object.keys(s).forEach((function(a){var o;i[a]=Object(r.a)(Object(r.a)({},s[a]),{},{key:a,errors:[],onChange:function(e,a){t.updateFormData(Object(r.a)(Object(r.a)({},t.state.formData),{},Object(n.a)({},e,Object(r.a)(Object(r.a)({},t.state.formData[e]),{},{value:a}))))},value:function(){var t;if(!(a in e)||void 0===e[a])return s[a].default||void 0;switch(null===(t=s[a])||void 0===t?void 0:t.type){case"string[]":return e[a].map((function(e){return"string"===typeof e?e:"".concat(e.id,"@").concat(e.version)}));case"keys":return function(){var t={};return Object.keys(s[a].keys).forEach((function(n){var r,o=n in e[a]?e[a][n]:null===(r=s[a][n])||void 0===r?void 0:r.default;void 0!==o&&(t[n]=o)})),t}();default:return e[a]}}()}),"repeater"===(null===(o=s[a])||void 0===o?void 0:o.type)&&(i[a].columns="columns"in i[a]?i[a].columns:[{label:"Key",key:"key"}])})),t.setState({isNew:a,supportsTemplates:o,formData:i,saveBusy:!1,busy:!1,ready:!0})}}))}))}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"validateJson",value:function(e){var t=this;e.preventDefault(),this.setState({validateBusy:!0}),p.a.validateValue(this.props.schemaKey,this.state.formData).then((function(e){if(t.mounted){if(null===e||void 0===e?void 0:e.errors)return D.a.danger("".concat(e.errors.length," Error(s)")),void t.setState({formErrors:e.errors,validateBusy:!1});D.a.success("Valid \ud83d\udc4d"),t.setState({validateBusy:!1})}}))}},{key:"saveDocument",value:function(e){var t=this;e.preventDefault(),this.setState({saveBusy:!0}),p.a.setValue(this.props.schemaKey,this.state.formData).then((function(e){if(t.mounted){if(null===e||void 0===e?void 0:e.errors)return D.a.danger("".concat(e.errors.length," Error(s)")),void t.setState({formErrors:e.errors,saveBusy:!1});D.a.success("Saved"),t.setState({saveBusy:!1}),t.getSchemaValue()}}))}},{key:"showJson",value:function(e){var t=this;e.preventDefault();var a={};Object.keys(this.state.formData).forEach((function(e){if(void 0!==t.state.formData[e].value){if(Array.isArray(t.state.formData[e].value)&&0===t.state.formData[e].value.length)return;a[e]=t.state.formData[e].value}})),this.setState({formString:JSON.stringify(a,null,4),isShown:!0})}},{key:"removeError",value:function(e){var t=this.state.formErrors.splice(e,1);t.splice(e,1),this.setState({formErrors:t})}},{key:"updateFormData",value:function(e){console.log("UPDATE",e),this.setState({formData:e,changes:!0})}},{key:"render",value:function(){var e=this;return d.a.createElement("article",null,this.state.ready?d.a.createElement("section",{className:"split-content"},d.a.createElement("div",{className:"split-content__left"},this.state.busy?d.a.createElement(S.a,null):[d.a.createElement(w.a,{key:0,display:"flex",padding:".5em",background:"tint2"},d.a.createElement(w.a,{flex:1,alignItems:"center",display:"flex"},d.a.createElement(k.a,{size:600},"".concat(this.props.schemaKey," Config")))),d.a.createElement(f.a,{key:1,className:"split-content__form",data:this.state.formData})]),d.a.createElement("div",{className:"split-content__right"},d.a.createElement(w.a,{padding:".5em",backgroundColor:"white",borderBottom:"muted"},d.a.createElement(B.a,{disabled:!this.state.changes,appearance:"minimal",onClick:this.saveDocument,isLoading:this.state.saveBusy,iconBefore:this.state.saveBusy?null:z.a},this.state.isNew?"Save":"Update"),d.a.createElement(B.a,{appearance:"minimal",onClick:this.validateJson,isLoading:this.state.validateBusy,iconBefore:this.state.validateBusy?null:C.a},"Validate"),d.a.createElement(B.a,{appearance:"minimal",iconBefore:V.a,onClick:this.showJson},"View Json"),this.state.isNew?null:d.a.createElement(B.a,{appearance:"minimal",intent:"danger",marginRight:".5em",iconBefore:M,onClick:function(t){t.preventDefault(),e.setState({isDeleteShown:!0})}},"Delete")),this.state.formErrors.map((function(t,a){return d.a.createElement(R.a,{isRemoveable:!0,onRemove:function(){e.removeError(a)},key:a,intent:"danger",title:t,marginBottom:15})})),d.a.createElement(w.a,{padding:"1em"},d.a.createElement(k.a,{size:400},"What is this?"),d.a.createElement(K.a,{size:400,color:"muted"},"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam laoreet non augue et faucibus. Ut arcu tellus, hendrerit id sem in, iaculis varius ipsum. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Etiam ac aliquet orci. Donec porta risus at nisi placerat pellentesque."))),this.state.saveBusy||this.state.validateBusy?d.a.createElement("div",{className:"content-busy"}):null):null,d.a.createElement(L.a,{isShown:this.state.isShown,onCloseComplete:function(){return e.setState({isShown:!1})}},d.a.createElement(w.a,{padding:".5em",backgroundColor:"white",borderBottom:"muted"},d.a.createElement(B.a,{disabled:!0,appearance:"minimal",iconBefore:V.a},"Edit")),d.a.createElement(j,{codeString:this.state.formString})),d.a.createElement(T.a,{isShown:this.state.isDeleteShown,hasHeader:!1,intent:"danger",isConfirmLoading:this.state.busy,onConfirm:function(){e.setState({busy:!0}),p.a.deleteValue(e.props.schemaKey,e.state.formData.key.value).then((function(t){e.setState({isDeleteShown:!1}),e.props.history.goBack(),D.a.success("Removed Successfully")}))},onCloseComplete:function(){return e.setState({isDeleteShown:!1,busy:!1})},confirmLabel:"Delete"},d.a.createElement(k.a,{size:600},"Are you sure?"),d.a.createElement(K.a,{size:400,color:"muted"},"Removing this ",this.props.schemaPath," may effect other components that require it.")))}}]),a}(v.Component);t.default=_}}]);
//# sourceMappingURL=6.7dd327d4.chunk.js.map